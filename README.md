# Zabbix-License_expiration_date_kms  
Контролирует срок активации лицензии полученной с KMS сервера.  

На некоторых редакциях ОС Windows лицензия получается с KMS сервера (локального или глобального).  
Получить дату до которой действуют активания можно с помощью команды  
```
c:\Windows\System32\cscript.exe /nologo c:\Windows\System32\slmgr.vbs /xpr
```
Результат команды будет пример следюущий  
```
Windows(R), ServerStandard edition:
Срок активации корпоративных лицензий истечет 01.03.2022 12:32:14
```
Будем использовать эту команду для получения даты окончания активации.  
## Для контроля срока до окончания лицензии через Zabbix необходимо:
- установленный zabbixagent на ОС Windows
- в файл _zabbix_agentd.conf_ добавить строки
```
# Проверка срока активации
Timeout=30
# для версии 5.0.2 и новее
AllowKey=system.run[*slmgr.vbs /xpr]
```
- импортировать шаблон  
- в шаблоне изменить при необходимости пороги триггеров  
- - макрос {$DAY_ALARM} - количество дней для триггера АЛАРМ    
- - макрос {$DAY_INFO} - количество дней для триггера ИНФО  
